{"ast":null,"code":"var _jsxFileName = \"/Users/chenguanyu/Desktop/yuniver_CRUD/client/src/pages/FlowChartEditor.jsx\",\n  _s = $RefreshSig$();\n// src/pages/FlowChartEditor.jsx\nimport React, { useState, useEffect, useCallback } from 'react';\nimport ReactFlow, { addEdge, MiniMap, Controls, Background } from 'react-flow-renderer';\nimport axios from 'axios';\nimport { useParams } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst FlowChartEditor = () => {\n  _s();\n  const {\n    id: projectId\n  } = useParams();\n  const token = localStorage.getItem('token');\n  const API_URL = process.env.REACT_APP_API_URL || 'http://localhost:5001/api';\n\n  // 如果沒有特別自定義 nodeTypes，可以直接定義為空物件，不需要使用 useMemo\n  const customNodeTypes = {};\n  const [nodes, setNodes] = useState([]);\n  const [edges, setEdges] = useState([]);\n  const [selectedNode, setSelectedNode] = useState(null);\n\n  // 取得流程圖資料並轉換成 React Flow 節點與邊\n  useEffect(() => {\n    const fetchFlowChart = async () => {\n      try {\n        const res = await axios.get(`${API_URL}/projects/${projectId}/flowchart`, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        const flowChartData = res.data; // 預期格式：物件陣列\n        let loadedNodes = [];\n        let loadedEdges = [];\n        if (Array.isArray(flowChartData)) {\n          loadedNodes = flowChartData.map(item => ({\n            id: item.id,\n            data: {\n              label: item.label || 'No Label',\n              type: item.type || 'task',\n              description: item.description || '',\n              extras: item.extras || [],\n              link: item.link || ''\n            },\n            position: item.position || {\n              x: Math.random() * 250,\n              y: Math.random() * 250\n            }\n          }));\n          flowChartData.forEach(item => {\n            if (item.children && Array.isArray(item.children)) {\n              item.children.forEach(childId => {\n                loadedEdges.push({\n                  id: `e${item.id}-${childId}`,\n                  source: item.id,\n                  target: childId\n                });\n              });\n            }\n          });\n        }\n        setNodes(loadedNodes);\n        setEdges(loadedEdges);\n      } catch (error) {\n        console.error('Failed to load flow chart:', error);\n      }\n    };\n    fetchFlowChart();\n  }, [projectId, API_URL, token]);\n\n  // 注意：React Flow v10+ 使用 onNodeClick 而不是 onElementClick\n  const onNodeClick = (event, node) => {\n    setSelectedNode(node);\n  };\n  const onConnect = useCallback(params => setEdges(eds => addEdge(params, eds)), []);\n  const handleNodeChange = e => {\n    if (!selectedNode) return;\n    const {\n      name,\n      value\n    } = e.target;\n    setNodes(nds => nds.map(node => {\n      if (node.id === selectedNode.id) {\n        return {\n          ...node,\n          data: {\n            ...node.data,\n            [name]: value\n          }\n        };\n      }\n      return node;\n    }));\n    setSelectedNode(prev => prev ? {\n      ...prev,\n      data: {\n        ...prev.data,\n        [name]: value\n      }\n    } : prev);\n  };\n  const addNewNode = () => {\n    const newId = `${Math.random().toString(36).substr(2, 9)}`;\n    const newNode = {\n      id: newId,\n      data: {\n        label: 'New Node',\n        type: 'task',\n        description: '',\n        extras: [],\n        link: ''\n      },\n      position: {\n        x: 100,\n        y: 100\n      }\n    };\n    setNodes(nds => [...nds, newNode]);\n  };\n  const saveFlowChart = async () => {\n    // 轉換 nodes 與 edges 回 JSON 結構\n    const flowChartData = nodes.map(node => {\n      const children = edges.filter(e => e.source === node.id).map(e => e.target);\n      return {\n        id: node.id,\n        type: node.data.type,\n        label: node.data.label,\n        description: node.data.description,\n        extras: node.data.extras,\n        link: node.data.link,\n        position: node.position,\n        children\n      };\n    });\n    try {\n      await axios.put(`${API_URL}/projects/${projectId}/flowchart`, {\n        flowChart: flowChartData\n      }, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      alert('Flow chart saved successfully!');\n    } catch (error) {\n      console.error('Failed to save flow chart:', error);\n      alert('Save failed');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      display: 'flex',\n      height: '80vh'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        flex: 1,\n        border: '1px solid #ddd'\n      },\n      children: [/*#__PURE__*/_jsxDEV(ReactFlow, {\n        nodes: nodes,\n        edges: edges,\n        onNodeClick: onNodeClick,\n        onConnect: onConnect,\n        nodeTypes: customNodeTypes,\n        fitView: true,\n        children: [/*#__PURE__*/_jsxDEV(MiniMap, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Controls, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Background, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          margin: '10px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: addNewNode,\n          children: \"Add Node\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: saveFlowChart,\n          style: {\n            marginLeft: '10px'\n          },\n          children: \"Save Flow Chart\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        width: '300px',\n        padding: '10px',\n        borderLeft: '1px solid #ccc'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Edit Node\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 9\n      }, this), selectedNode ? /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Type:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 145,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            name: \"type\",\n            value: selectedNode.data.type,\n            onChange: handleNodeChange,\n            children: ['phase', 'task', 'subFlow', 'iterative', 'note'].map(t => /*#__PURE__*/_jsxDEV(\"option\", {\n              value: t,\n              children: t\n            }, t, false, {\n              fileName: _jsxFileName,\n              lineNumber: 148,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 146,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Label:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"label\",\n            value: selectedNode.data.label,\n            onChange: handleNodeChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 154,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Description:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 157,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n            name: \"description\",\n            value: selectedNode.data.description,\n            onChange: handleNodeChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 158,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Link:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 161,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"link\",\n            value: selectedNode.data.link,\n            onChange: handleNodeChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 162,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Extras (\\u9017\\u865F\\u5206\\u9694):\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 165,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"extras\",\n            value: selectedNode.data.extras.join(','),\n            onChange: e => {\n              const arr = e.target.value.split(',').map(s => s.trim()).filter(s => s);\n              handleNodeChange({\n                target: {\n                  name: 'extras',\n                  value: arr\n                }\n              });\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 166,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Select a node to edit its properties.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 121,\n    columnNumber: 5\n  }, this);\n};\n_s(FlowChartEditor, \"JLBqbpeQKXzarvK8g8TBbnmPBC8=\", false, function () {\n  return [useParams];\n});\n_c = FlowChartEditor;\nexport default FlowChartEditor;\nvar _c;\n$RefreshReg$(_c, \"FlowChartEditor\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","ReactFlow","addEdge","MiniMap","Controls","Background","axios","useParams","jsxDEV","_jsxDEV","FlowChartEditor","_s","id","projectId","token","localStorage","getItem","API_URL","process","env","REACT_APP_API_URL","customNodeTypes","nodes","setNodes","edges","setEdges","selectedNode","setSelectedNode","fetchFlowChart","res","get","headers","Authorization","flowChartData","data","loadedNodes","loadedEdges","Array","isArray","map","item","label","type","description","extras","link","position","x","Math","random","y","forEach","children","childId","push","source","target","error","console","onNodeClick","event","node","onConnect","params","eds","handleNodeChange","e","name","value","nds","prev","addNewNode","newId","toString","substr","newNode","saveFlowChart","filter","put","flowChart","alert","style","display","height","flex","border","nodeTypes","fitView","fileName","_jsxFileName","lineNumber","columnNumber","margin","onClick","marginLeft","width","padding","borderLeft","onChange","t","join","arr","split","s","trim","_c","$RefreshReg$"],"sources":["/Users/chenguanyu/Desktop/yuniver_CRUD/client/src/pages/FlowChartEditor.jsx"],"sourcesContent":["// src/pages/FlowChartEditor.jsx\nimport React, { useState, useEffect, useCallback } from 'react';\nimport ReactFlow, { addEdge, MiniMap, Controls, Background } from 'react-flow-renderer';\nimport axios from 'axios';\nimport { useParams } from 'react-router-dom';\n\nconst FlowChartEditor = () => {\n  const { id: projectId } = useParams();\n  const token = localStorage.getItem('token');\n  const API_URL = process.env.REACT_APP_API_URL || 'http://localhost:5001/api';\n\n  // 如果沒有特別自定義 nodeTypes，可以直接定義為空物件，不需要使用 useMemo\n  const customNodeTypes = {};\n\n  const [nodes, setNodes] = useState([]);\n  const [edges, setEdges] = useState([]);\n  const [selectedNode, setSelectedNode] = useState(null);\n\n  // 取得流程圖資料並轉換成 React Flow 節點與邊\n  useEffect(() => {\n    const fetchFlowChart = async () => {\n      try {\n        const res = await axios.get(`${API_URL}/projects/${projectId}/flowchart`, {\n          headers: { Authorization: `Bearer ${token}` },\n        });\n        const flowChartData = res.data; // 預期格式：物件陣列\n        let loadedNodes = [];\n        let loadedEdges = [];\n        if (Array.isArray(flowChartData)) {\n          loadedNodes = flowChartData.map(item => ({\n            id: item.id,\n            data: {\n              label: item.label || 'No Label',\n              type: item.type || 'task',\n              description: item.description || '',\n              extras: item.extras || [],\n              link: item.link || ''\n            },\n            position: item.position || { x: Math.random() * 250, y: Math.random() * 250 },\n          }));\n          flowChartData.forEach(item => {\n            if (item.children && Array.isArray(item.children)) {\n              item.children.forEach(childId => {\n                loadedEdges.push({\n                  id: `e${item.id}-${childId}`,\n                  source: item.id,\n                  target: childId,\n                });\n              });\n            }\n          });\n        }\n        setNodes(loadedNodes);\n        setEdges(loadedEdges);\n      } catch (error) {\n        console.error('Failed to load flow chart:', error);\n      }\n    };\n    fetchFlowChart();\n  }, [projectId, API_URL, token]);\n\n  // 注意：React Flow v10+ 使用 onNodeClick 而不是 onElementClick\n  const onNodeClick = (event, node) => {\n    setSelectedNode(node);\n  };\n\n  const onConnect = useCallback((params) => setEdges((eds) => addEdge(params, eds)), []);\n\n  const handleNodeChange = (e) => {\n    if (!selectedNode) return;\n    const { name, value } = e.target;\n    setNodes(nds =>\n      nds.map(node => {\n        if (node.id === selectedNode.id) {\n          return { ...node, data: { ...node.data, [name]: value } };\n        }\n        return node;\n      })\n    );\n    setSelectedNode(prev => prev ? { ...prev, data: { ...prev.data, [name]: value } } : prev);\n  };\n\n  const addNewNode = () => {\n    const newId = `${Math.random().toString(36).substr(2, 9)}`;\n    const newNode = {\n      id: newId,\n      data: { label: 'New Node', type: 'task', description: '', extras: [], link: '' },\n      position: { x: 100, y: 100 },\n    };\n    setNodes(nds => [...nds, newNode]);\n  };\n\n  const saveFlowChart = async () => {\n    // 轉換 nodes 與 edges 回 JSON 結構\n    const flowChartData = nodes.map(node => {\n      const children = edges.filter(e => e.source === node.id).map(e => e.target);\n      return {\n        id: node.id,\n        type: node.data.type,\n        label: node.data.label,\n        description: node.data.description,\n        extras: node.data.extras,\n        link: node.data.link,\n        position: node.position,\n        children,\n      };\n    });\n    try {\n      await axios.put(`${API_URL}/projects/${projectId}/flowchart`, \n        { flowChart: flowChartData },\n        { headers: { Authorization: `Bearer ${token}` } }\n      );\n      alert('Flow chart saved successfully!');\n    } catch (error) {\n      console.error('Failed to save flow chart:', error);\n      alert('Save failed');\n    }\n  };\n\n  return (\n    <div style={{ display: 'flex', height: '80vh' }}>\n      <div style={{ flex: 1, border: '1px solid #ddd' }}>\n        <ReactFlow\n          nodes={nodes}\n          edges={edges}\n          onNodeClick={onNodeClick}\n          onConnect={onConnect}\n          nodeTypes={customNodeTypes}\n          fitView\n        >\n          <MiniMap />\n          <Controls />\n          <Background />\n        </ReactFlow>\n        <div style={{ margin: '10px' }}>\n          <button onClick={addNewNode}>Add Node</button>\n          <button onClick={saveFlowChart} style={{ marginLeft: '10px' }}>Save Flow Chart</button>\n        </div>\n      </div>\n      <div style={{ width: '300px', padding: '10px', borderLeft: '1px solid #ccc' }}>\n        <h3>Edit Node</h3>\n        {selectedNode ? (\n          <div>\n            <div>\n              <label>Type:</label>\n              <select name=\"type\" value={selectedNode.data.type} onChange={handleNodeChange}>\n                {['phase', 'task', 'subFlow', 'iterative', 'note'].map(t => (\n                  <option key={t} value={t}>{t}</option>\n                ))}\n              </select>\n            </div>\n            <div>\n              <label>Label:</label>\n              <input name=\"label\" value={selectedNode.data.label} onChange={handleNodeChange} />\n            </div>\n            <div>\n              <label>Description:</label>\n              <textarea name=\"description\" value={selectedNode.data.description} onChange={handleNodeChange} />\n            </div>\n            <div>\n              <label>Link:</label>\n              <input name=\"link\" value={selectedNode.data.link} onChange={handleNodeChange} />\n            </div>\n            <div>\n              <label>Extras (逗號分隔):</label>\n              <input\n                name=\"extras\"\n                value={selectedNode.data.extras.join(',')}\n                onChange={(e) => {\n                  const arr = e.target.value.split(',').map(s => s.trim()).filter(s => s);\n                  handleNodeChange({ target: { name: 'extras', value: arr } });\n                }}\n              />\n            </div>\n          </div>\n        ) : (\n          <p>Select a node to edit its properties.</p>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default FlowChartEditor;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}