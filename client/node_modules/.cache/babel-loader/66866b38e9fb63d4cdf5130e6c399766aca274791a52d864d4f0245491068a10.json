{"ast":null,"code":"var _jsxFileName = \"/Users/chenguanyu/Desktop/yuniver_CRUD/client/src/pages/FlowChartEditor.jsx\",\n  _s = $RefreshSig$();\n// src/pages/CustomFlowChartEditor.jsx\nimport React, { useState, useEffect, useRef } from 'react';\nimport axios from 'axios';\nimport { useParams } from 'react-router-dom';\n\n// Â∏∏Êï∏Ë®≠ÂÆö\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst NODE_WIDTH_DEFAULT = 140;\nconst NODE_HEIGHT_DEFAULT = 80;\nconst RESIZE_HANDLE_SIZE = 8;\nconst PHASE_PADDING = 20; // Phase Â§ñÊ°ÜËàáÂÖßÂÆπÈñìË∑ù\n\n// Ê†πÊìö type ÂÆöÁæ©‰∏çÂêåÁØÄÈªûÁöÑÊ®£ÂºèËàáÂÖßÂÆπ\nconst renderNodeContent = node => {\n  const commonStyle = {\n    padding: \"4px\",\n    textAlign: \"center\",\n    overflow: \"hidden\"\n  };\n  switch (node.type) {\n    case \"phase\":\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          ...commonStyle,\n          border: \"2px dashed blue\",\n          backgroundColor: \"#e0f7ff\",\n          width: \"100%\",\n          height: \"100%\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontWeight: \"bold\",\n            fontSize: \"14px\"\n          },\n          children: node.label\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 19,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontSize: \"12px\"\n          },\n          children: node.description\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 20,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 18,\n        columnNumber: 9\n      }, this);\n    case \"task\":\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          ...commonStyle,\n          border: \"2px solid black\",\n          backgroundColor: \"#fff\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontWeight: \"bold\",\n            fontSize: \"14px\"\n          },\n          children: node.label\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 26,\n          columnNumber: 11\n        }, this), node.important && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            color: \"red\",\n            fontSize: \"10px\"\n          },\n          children: \"Important\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 27,\n          columnNumber: 30\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontSize: \"12px\"\n          },\n          children: node.description\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 28,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 25,\n        columnNumber: 9\n      }, this);\n    case \"subFlow\":\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          ...commonStyle,\n          border: \"2px solid gray\",\n          backgroundColor: \"#f0f0f0\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontWeight: \"bold\",\n            fontSize: \"13px\"\n          },\n          children: node.label\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 34,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontSize: \"11px\"\n          },\n          children: node.description\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 35,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 33,\n        columnNumber: 9\n      }, this);\n    case \"iterative\":\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          ...commonStyle,\n          border: \"2px dotted green\",\n          backgroundColor: \"#e8ffe8\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontWeight: \"bold\",\n            fontSize: \"14px\"\n          },\n          children: [node.label, \" \\uD83D\\uDD04\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 41,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontSize: \"12px\"\n          },\n          children: node.description\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 42,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 9\n      }, this);\n    case \"note\":\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          ...commonStyle,\n          border: \"1px solid orange\",\n          backgroundColor: \"#fff7d6\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontStyle: \"italic\",\n            fontSize: \"12px\"\n          },\n          children: node.text || node.label\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontSize: \"10px\"\n          },\n          children: node.description\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 9\n      }, this);\n    case \"extra\":\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          ...commonStyle,\n          fontSize: \"10px\",\n          padding: \"2px\"\n        },\n        children: [\"\\u2022 \", node.content]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 9\n      }, this);\n    default:\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          ...commonStyle,\n          border: \"1px solid black\"\n        },\n        children: node.label || \"No Label\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 9\n      }, this);\n  }\n};\nconst CustomFlowChartEditor = () => {\n  _s();\n  const {\n    id: projectId\n  } = useParams();\n  const token = localStorage.getItem('token');\n  const API_URL = process.env.REACT_APP_API_URL || 'http://localhost:5001/api';\n  const containerRef = useRef(null);\n\n  // ÁØÄÈªûË≥áÊñôÔºåÊØèÂÄãÁØÄÈªûÂåÖÂê´Ôºö\n  // id, type, label, description, link, containerId, position:{x,y}, size:{width,height}, children (array of node ids)\n  const [nodes, setNodes] = useState([]);\n  const [selectedNodeId, setSelectedNodeId] = useState(null);\n  const [draggingNodeId, setDraggingNodeId] = useState(null);\n  const [resizingNodeId, setResizingNodeId] = useState(null);\n  const [dragOffset, setDragOffset] = useState({\n    x: 0,\n    y: 0\n  });\n  const [resizeStart, setResizeStart] = useState({\n    x: 0,\n    y: 0,\n    width: 0,\n    height: 0\n  });\n\n  // ËÆÄÂèñÂæåÁ´ØÊµÅÁ®ãÂúñË≥áÊñô\n  useEffect(() => {\n    const fetchFlowChart = async () => {\n      try {\n        const res = await axios.get(`${API_URL}/projects/${projectId}/flowchart`, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        // È†êË®≠Ëã•Ê≤íÊúâ size ÂâáÁµ¶È†êË®≠Â§ßÂ∞èÔºõcontainerId È†êË®≠ null\n        const data = (res.data || []).map(item => ({\n          ...item,\n          position: item.position || {\n            x: 50,\n            y: 50\n          },\n          size: item.size || {\n            width: NODE_WIDTH_DEFAULT,\n            height: NODE_HEIGHT_DEFAULT\n          },\n          containerId: item.containerId || null,\n          children: item.children || []\n        }));\n        setNodes(data);\n      } catch (error) {\n        console.error(\"Failed to load flowchart:\", error);\n      }\n    };\n    fetchFlowChart();\n  }, [projectId, API_URL, token]);\n\n  // ÂèñÂæóË¢´ÈÅ∏‰∏≠ÁØÄÈªû\n  const selectedNode = nodes.find(n => n.id === selectedNodeId);\n\n  // Áï∂ÊãñÊõ≥ÈñãÂßã\n  const handleMouseDown = (e, nodeId) => {\n    e.stopPropagation();\n    const nodeElem = e.currentTarget;\n    const rect = nodeElem.getBoundingClientRect();\n    setDraggingNodeId(nodeId);\n    setDragOffset({\n      x: e.clientX - rect.left,\n      y: e.clientY - rect.top\n    });\n  };\n\n  // Áï∂ÊãñÊõ≥ÁßªÂãï\n  const handleMouseMove = e => {\n    if (draggingNodeId) {\n      const containerRect = containerRef.current.getBoundingClientRect();\n      const newX = e.clientX - containerRect.left - dragOffset.x;\n      const newY = e.clientY - containerRect.top - dragOffset.y;\n      setNodes(prevNodes => prevNodes.map(n => {\n        // Â¶ÇÊûúÊ≠£Âú®ÊãñÊõ≥ÁöÑÁØÄÈªûÔºåÊõ¥Êñ∞‰ΩçÁΩÆ\n        if (n.id === draggingNodeId) {\n          return {\n            ...n,\n            position: {\n              x: newX,\n              y: newY\n            }\n          };\n        }\n        // Ëã•Ë©≤ÁØÄÈªûÊúâ containerId Á≠âÊñºÊ≠£Âú®ÊãñÊõ≥ÁöÑ Phase ÁöÑ idÔºå‰∏îÊãñÊõ≥ÁöÑÁØÄÈªûÊòØ phaseÔºåÂâáÈö®‰πãÁßªÂãï\n        const draggingNode = prevNodes.find(item => item.id === draggingNodeId);\n        if (draggingNode && draggingNode.type === \"phase\" && n.containerId === draggingNodeId) {\n          return {\n            ...n,\n            position: {\n              x: n.position.x + (newX - draggingNode.position.x),\n              y: n.position.y + (newY - draggingNode.position.y)\n            }\n          };\n        }\n        return n;\n      }));\n    }\n    if (resizingNodeId) {\n      const containerRect = containerRef.current.getBoundingClientRect();\n      const dx = e.clientX - containerRect.left - resizeStart.x;\n      const dy = e.clientY - containerRect.top - resizeStart.y;\n      setNodes(prevNodes => prevNodes.map(n => {\n        if (n.id === resizingNodeId) {\n          return {\n            ...n,\n            size: {\n              width: Math.max(40, resizeStart.width + dx),\n              height: Math.max(30, resizeStart.height + dy)\n            }\n          };\n        }\n        return n;\n      }));\n    }\n  };\n\n  // Áï∂ÊãñÊõ≥ÊàñÁ∏ÆÊîæÁµêÊùü\n  const handleMouseUp = e => {\n    if (draggingNodeId) {\n      // ÊãñÊõ≥ÁµêÊùüÂæåÊ™¢Êü•ÊòØÂê¶ËêΩÂÖ•ÊüêÂÄã phase ÁØÄÈªû‰∏≠\n      setNodes(prevNodes => prevNodes.map(n => {\n        if (n.id === draggingNodeId && n.type !== \"phase\") {\n          // Â∞ãÊâæÊâÄÊúâ phase ÁØÄÈªûÔºåÊ™¢Êü•Áï∂ÂâçÊãñÊõ≥ÁØÄÈªû‰∏≠ÂøÉÊòØÂê¶ËêΩÂú® phase ÂÖß\n          const center = {\n            x: n.position.x + n.size.width / 2,\n            y: n.position.y + n.size.height / 2\n          };\n          let newContainerId = null;\n          prevNodes.forEach(p => {\n            if (p.type === \"phase\") {\n              if (center.x >= p.position.x && center.x <= p.position.x + p.size.width && center.y >= p.position.y && center.y <= p.position.y + p.size.height) {\n                newContainerId = p.id;\n              }\n            }\n          });\n          return {\n            ...n,\n            containerId: newContainerId\n          };\n        }\n        return n;\n      }));\n      setDraggingNodeId(null);\n    }\n    if (resizingNodeId) {\n      setResizingNodeId(null);\n    }\n  };\n\n  // Áï∂ÈªûÈÅ∏ÁØÄÈªûÔºà‰∏çÈªûÈÅ∏Á∏ÆÊîæÊâãÊääÔºâÊôÇË®≠ÂÆöÈÅ∏Âèñ\n  const handleSelectNode = (e, nodeId) => {\n    e.stopPropagation();\n    setSelectedNodeId(nodeId);\n  };\n\n  // ÈñãÂßãÁ∏ÆÊîæÔºàÈªûÈÅ∏Âè≥‰∏ãËßíÊâãÊääÔºâ\n  const handleResizeMouseDown = (e, nodeId) => {\n    e.stopPropagation();\n    const containerRect = containerRef.current.getBoundingClientRect();\n    setResizingNodeId(nodeId);\n    setResizeStart({\n      x: e.clientX - containerRect.left,\n      y: e.clientY - containerRect.top,\n      width: selectedNode.size.width,\n      height: selectedNode.size.height\n    });\n  };\n\n  // Âà™Èô§ÁØÄÈªû\n  const handleDeleteNode = () => {\n    if (!selectedNodeId) return;\n    setNodes(prevNodes => prevNodes.filter(n => n.id !== selectedNodeId).map(n => n.containerId === selectedNodeId ? {\n      ...n,\n      containerId: null\n    } : n));\n    setSelectedNodeId(null);\n  };\n\n  // Êñ∞Â¢ûÁØÄÈªûÔºàÂèØÁî±‰ΩøÁî®ËÄÖÈÅ∏Êìá typeÔºåÈÄôË£°È†êË®≠ÁÇ∫ taskÔºåPhase ‰πüÂèØÊñ∞Â¢ûÔºâ\n  const handleAddNode = (type = \"task\") => {\n    const newNode = {\n      id: `${Date.now()}`,\n      type,\n      label: type === \"phase\" ? \"New Phase\" : \"New Node\",\n      description: \"\",\n      link: \"\",\n      extras: [],\n      children: [],\n      containerId: null,\n      position: {\n        x: 50,\n        y: 50\n      },\n      size: {\n        width: NODE_WIDTH_DEFAULT,\n        height: NODE_HEIGHT_DEFAULT\n      }\n    };\n    setNodes(prev => [...prev, newNode]);\n  };\n\n  // ÂÑ≤Â≠òÊµÅÁ®ãÂúñ JSON Âà∞ÂæåÁ´Ø\n  const handleSave = async () => {\n    try {\n      await axios.put(`${API_URL}/projects/${projectId}/flowchart`, {\n        flowChart: nodes\n      }, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      alert(\"Flowchart saved successfully!\");\n    } catch (error) {\n      console.error(\"Failed to save flowchart:\", error);\n      alert(\"Save failed.\");\n    }\n  };\n\n  // Ê†πÊìöÁØÄÈªû containerId Âà§Êñ∑ÊòØÂê¶È°ØÁ§∫ Phase Â∫ïÊ°ÜÔºàPhase ÁØÄÈªûËá™Ë°åÂëàÁèæÂ§ñÊ°ÜÔºâ\n  const renderConnections = () => {\n    // Êú¨ÁØÑ‰æã‰∏çËá™ÂãïÁï´ÈÄ£Á∑öÔºåËã•ÊúâÈúÄË¶ÅÂèØÂä†ÂÖ•Áï´Á∑öÈÇèËºØ\n    return null;\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Custom Flow Chart Editor\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 254,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginBottom: \"10px\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => handleAddNode(\"task\"),\n        children: \"Add Task\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 256,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => handleAddNode(\"phase\"),\n        style: {\n          marginLeft: \"10px\"\n        },\n        children: \"Add Phase\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 257,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleSave,\n        style: {\n          marginLeft: \"10px\"\n        },\n        children: \"Save Flow Chart\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: containerRef,\n      style: {\n        position: \"relative\",\n        width: \"100%\",\n        height: \"600px\",\n        border: \"1px solid #ccc\",\n        backgroundColor: \"#fafafa\"\n      },\n      onMouseMove: handleMouseMove,\n      onMouseUp: handleMouseUp,\n      children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n        style: {\n          position: \"absolute\",\n          top: 0,\n          left: 0,\n          width: \"100%\",\n          height: \"100%\"\n        },\n        children: renderConnections()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 267,\n        columnNumber: 9\n      }, this), nodes.map(node => {\n        // Ëã•Ë©≤ÁØÄÈªûÊúâ containerIdÔºåÂâáÂÖ∂ z-indexËºÉÈ´òÔºàÂëàÁèæÂú® Phase ÂÖßÔºâ\n        const isInPhase = node.containerId !== null;\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            position: \"absolute\",\n            left: node.position.x,\n            top: node.position.y,\n            width: node.size.width,\n            height: node.size.height,\n            border: selectedNodeId === node.id ? \"2px solid red\" : \"1px solid #333\",\n            boxSizing: \"border-box\",\n            backgroundColor: node.type === \"phase\" ? \"rgba(0, 0, 255, 0.1)\" : \"#fff\",\n            zIndex: isInPhase ? 2 : 1\n          },\n          onMouseDown: e => handleMouseDown(e, node.id),\n          onClick: e => handleSelectNode(e, node.id),\n          children: [renderNodeContent(node), selectedNodeId === node.id && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              position: \"absolute\",\n              right: 0,\n              bottom: 0,\n              width: RESIZE_HANDLE_SIZE,\n              height: RESIZE_HANDLE_SIZE,\n              backgroundColor: \"gray\",\n              cursor: \"se-resize\"\n            },\n            onMouseDown: e => handleResizeMouseDown(e, node.id)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 293,\n            columnNumber: 17\n          }, this)]\n        }, node.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 274,\n          columnNumber: 13\n        }, this);\n      })]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 260,\n      columnNumber: 7\n    }, this), selectedNode && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: \"20px\",\n        border: \"1px solid #ccc\",\n        padding: \"10px\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Edit Node Properties\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 313,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Type:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 315,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          name: \"type\",\n          value: selectedNode.type,\n          onChange: handleEditChange,\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"phase\",\n            children: \"phase\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 317,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"task\",\n            children: \"task\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 318,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"subFlow\",\n            children: \"subFlow\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 319,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"iterative\",\n            children: \"iterative\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 320,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"note\",\n            children: \"note\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 321,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"extra\",\n            children: \"extra\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 322,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 316,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 314,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Label:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 326,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"label\",\n          value: selectedNode.label,\n          onChange: handleEditChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 327,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 325,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Description:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 330,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          name: \"description\",\n          value: selectedNode.description,\n          onChange: handleEditChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 331,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 329,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Link:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 334,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"link\",\n          value: selectedNode.link,\n          onChange: handleEditChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 335,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 333,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Children (comma-separated IDs):\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 338,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          value: (selectedNode.children || []).join(\",\"),\n          onChange: handleChildrenChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 339,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 337,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Extras (comma-separated):\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 345,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"extras\",\n          value: (selectedNode.extras || []).join(\",\"),\n          onChange: e => {\n            const arr = e.target.value.split(\",\").map(s => s.trim()).filter(s => s);\n            handleEditChange({\n              target: {\n                name: \"extras\",\n                value: arr\n              }\n            });\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 346,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 344,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginTop: \"10px\"\n        },\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleDeleteNode,\n          children: \"Delete Node\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 356,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 355,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 312,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 253,\n    columnNumber: 5\n  }, this);\n};\n_s(CustomFlowChartEditor, \"Bj+V9+fltUw3d9pH67eTwW9yX5Y=\", false, function () {\n  return [useParams];\n});\n_c = CustomFlowChartEditor;\nexport default CustomFlowChartEditor;\nvar _c;\n$RefreshReg$(_c, \"CustomFlowChartEditor\");","map":{"version":3,"names":["React","useState","useEffect","useRef","axios","useParams","jsxDEV","_jsxDEV","NODE_WIDTH_DEFAULT","NODE_HEIGHT_DEFAULT","RESIZE_HANDLE_SIZE","PHASE_PADDING","renderNodeContent","node","commonStyle","padding","textAlign","overflow","type","style","border","backgroundColor","width","height","children","fontWeight","fontSize","label","fileName","_jsxFileName","lineNumber","columnNumber","description","important","color","fontStyle","text","content","CustomFlowChartEditor","_s","id","projectId","token","localStorage","getItem","API_URL","process","env","REACT_APP_API_URL","containerRef","nodes","setNodes","selectedNodeId","setSelectedNodeId","draggingNodeId","setDraggingNodeId","resizingNodeId","setResizingNodeId","dragOffset","setDragOffset","x","y","resizeStart","setResizeStart","fetchFlowChart","res","get","headers","Authorization","data","map","item","position","size","containerId","error","console","selectedNode","find","n","handleMouseDown","e","nodeId","stopPropagation","nodeElem","currentTarget","rect","getBoundingClientRect","clientX","left","clientY","top","handleMouseMove","containerRect","current","newX","newY","prevNodes","draggingNode","dx","dy","Math","max","handleMouseUp","center","newContainerId","forEach","p","handleSelectNode","handleResizeMouseDown","handleDeleteNode","filter","handleAddNode","newNode","Date","now","link","extras","prev","handleSave","put","flowChart","alert","renderConnections","marginBottom","onClick","marginLeft","ref","onMouseMove","onMouseUp","isInPhase","boxSizing","zIndex","onMouseDown","right","bottom","cursor","marginTop","name","value","onChange","handleEditChange","join","handleChildrenChange","arr","target","split","s","trim","_c","$RefreshReg$"],"sources":["/Users/chenguanyu/Desktop/yuniver_CRUD/client/src/pages/FlowChartEditor.jsx"],"sourcesContent":["// src/pages/CustomFlowChartEditor.jsx\nimport React, { useState, useEffect, useRef } from 'react';\nimport axios from 'axios';\nimport { useParams } from 'react-router-dom';\n\n// Â∏∏Êï∏Ë®≠ÂÆö\nconst NODE_WIDTH_DEFAULT = 140;\nconst NODE_HEIGHT_DEFAULT = 80;\nconst RESIZE_HANDLE_SIZE = 8;\nconst PHASE_PADDING = 20; // Phase Â§ñÊ°ÜËàáÂÖßÂÆπÈñìË∑ù\n\n// Ê†πÊìö type ÂÆöÁæ©‰∏çÂêåÁØÄÈªûÁöÑÊ®£ÂºèËàáÂÖßÂÆπ\nconst renderNodeContent = (node) => {\n  const commonStyle = { padding: \"4px\", textAlign: \"center\", overflow: \"hidden\" };\n  switch(node.type) {\n    case \"phase\":\n      return (\n        <div style={{ ...commonStyle, border: \"2px dashed blue\", backgroundColor: \"#e0f7ff\", width: \"100%\", height: \"100%\" }}>\n          <div style={{ fontWeight: \"bold\", fontSize: \"14px\" }}>{node.label}</div>\n          <div style={{ fontSize: \"12px\" }}>{node.description}</div>\n        </div>\n      );\n    case \"task\":\n      return (\n        <div style={{ ...commonStyle, border: \"2px solid black\", backgroundColor: \"#fff\" }}>\n          <div style={{ fontWeight: \"bold\", fontSize: \"14px\" }}>{node.label}</div>\n          {node.important && <div style={{ color: \"red\", fontSize: \"10px\" }}>Important</div>}\n          <div style={{ fontSize: \"12px\" }}>{node.description}</div>\n        </div>\n      );\n    case \"subFlow\":\n      return (\n        <div style={{ ...commonStyle, border: \"2px solid gray\", backgroundColor: \"#f0f0f0\" }}>\n          <div style={{ fontWeight: \"bold\", fontSize: \"13px\" }}>{node.label}</div>\n          <div style={{ fontSize: \"11px\" }}>{node.description}</div>\n        </div>\n      );\n    case \"iterative\":\n      return (\n        <div style={{ ...commonStyle, border: \"2px dotted green\", backgroundColor: \"#e8ffe8\" }}>\n          <div style={{ fontWeight: \"bold\", fontSize: \"14px\" }}>{node.label} üîÑ</div>\n          <div style={{ fontSize: \"12px\" }}>{node.description}</div>\n        </div>\n      );\n    case \"note\":\n      return (\n        <div style={{ ...commonStyle, border: \"1px solid orange\", backgroundColor: \"#fff7d6\" }}>\n          <div style={{ fontStyle: \"italic\", fontSize: \"12px\" }}>{node.text || node.label}</div>\n          <div style={{ fontSize: \"10px\" }}>{node.description}</div>\n        </div>\n      );\n    case \"extra\":\n      return (\n        <div style={{ ...commonStyle, fontSize:\"10px\", padding: \"2px\" }}>\n          ‚Ä¢ {node.content}\n        </div>\n      );\n    default:\n      return (\n        <div style={{ ...commonStyle, border: \"1px solid black\" }}>\n          {node.label || \"No Label\"}\n        </div>\n      );\n  }\n};\n\nconst CustomFlowChartEditor = () => {\n  const { id: projectId } = useParams();\n  const token = localStorage.getItem('token');\n  const API_URL = process.env.REACT_APP_API_URL || 'http://localhost:5001/api';\n  const containerRef = useRef(null);\n\n  // ÁØÄÈªûË≥áÊñôÔºåÊØèÂÄãÁØÄÈªûÂåÖÂê´Ôºö\n  // id, type, label, description, link, containerId, position:{x,y}, size:{width,height}, children (array of node ids)\n  const [nodes, setNodes] = useState([]);\n  const [selectedNodeId, setSelectedNodeId] = useState(null);\n  const [draggingNodeId, setDraggingNodeId] = useState(null);\n  const [resizingNodeId, setResizingNodeId] = useState(null);\n  const [dragOffset, setDragOffset] = useState({ x: 0, y: 0 });\n  const [resizeStart, setResizeStart] = useState({ x: 0, y: 0, width: 0, height: 0 });\n\n  // ËÆÄÂèñÂæåÁ´ØÊµÅÁ®ãÂúñË≥áÊñô\n  useEffect(() => {\n    const fetchFlowChart = async () => {\n      try {\n        const res = await axios.get(`${API_URL}/projects/${projectId}/flowchart`, {\n          headers: { Authorization: `Bearer ${token}` },\n        });\n        // È†êË®≠Ëã•Ê≤íÊúâ size ÂâáÁµ¶È†êË®≠Â§ßÂ∞èÔºõcontainerId È†êË®≠ null\n        const data = (res.data || []).map(item => ({\n          ...item,\n          position: item.position || { x: 50, y: 50 },\n          size: item.size || { width: NODE_WIDTH_DEFAULT, height: NODE_HEIGHT_DEFAULT },\n          containerId: item.containerId || null,\n          children: item.children || []\n        }));\n        setNodes(data);\n      } catch (error) {\n        console.error(\"Failed to load flowchart:\", error);\n      }\n    };\n    fetchFlowChart();\n  }, [projectId, API_URL, token]);\n\n  // ÂèñÂæóË¢´ÈÅ∏‰∏≠ÁØÄÈªû\n  const selectedNode = nodes.find(n => n.id === selectedNodeId);\n\n  // Áï∂ÊãñÊõ≥ÈñãÂßã\n  const handleMouseDown = (e, nodeId) => {\n    e.stopPropagation();\n    const nodeElem = e.currentTarget;\n    const rect = nodeElem.getBoundingClientRect();\n    setDraggingNodeId(nodeId);\n    setDragOffset({ x: e.clientX - rect.left, y: e.clientY - rect.top });\n  };\n\n  // Áï∂ÊãñÊõ≥ÁßªÂãï\n  const handleMouseMove = (e) => {\n    if (draggingNodeId) {\n      const containerRect = containerRef.current.getBoundingClientRect();\n      const newX = e.clientX - containerRect.left - dragOffset.x;\n      const newY = e.clientY - containerRect.top - dragOffset.y;\n      setNodes(prevNodes => prevNodes.map(n => {\n        // Â¶ÇÊûúÊ≠£Âú®ÊãñÊõ≥ÁöÑÁØÄÈªûÔºåÊõ¥Êñ∞‰ΩçÁΩÆ\n        if (n.id === draggingNodeId) {\n          return { ...n, position: { x: newX, y: newY } };\n        }\n        // Ëã•Ë©≤ÁØÄÈªûÊúâ containerId Á≠âÊñºÊ≠£Âú®ÊãñÊõ≥ÁöÑ Phase ÁöÑ idÔºå‰∏îÊãñÊõ≥ÁöÑÁØÄÈªûÊòØ phaseÔºåÂâáÈö®‰πãÁßªÂãï\n        const draggingNode = prevNodes.find(item => item.id === draggingNodeId);\n        if (draggingNode && draggingNode.type === \"phase\" && n.containerId === draggingNodeId) {\n          return { ...n, position: { x: n.position.x + (newX - draggingNode.position.x), y: n.position.y + (newY - draggingNode.position.y) } };\n        }\n        return n;\n      }));\n    }\n    if (resizingNodeId) {\n      const containerRect = containerRef.current.getBoundingClientRect();\n      const dx = e.clientX - containerRect.left - resizeStart.x;\n      const dy = e.clientY - containerRect.top - resizeStart.y;\n      setNodes(prevNodes => prevNodes.map(n => {\n        if (n.id === resizingNodeId) {\n          return {\n            ...n,\n            size: {\n              width: Math.max(40, resizeStart.width + dx),\n              height: Math.max(30, resizeStart.height + dy)\n            }\n          };\n        }\n        return n;\n      }));\n    }\n  };\n\n  // Áï∂ÊãñÊõ≥ÊàñÁ∏ÆÊîæÁµêÊùü\n  const handleMouseUp = (e) => {\n    if (draggingNodeId) {\n      // ÊãñÊõ≥ÁµêÊùüÂæåÊ™¢Êü•ÊòØÂê¶ËêΩÂÖ•ÊüêÂÄã phase ÁØÄÈªû‰∏≠\n      setNodes(prevNodes => prevNodes.map(n => {\n        if (n.id === draggingNodeId && n.type !== \"phase\") {\n          // Â∞ãÊâæÊâÄÊúâ phase ÁØÄÈªûÔºåÊ™¢Êü•Áï∂ÂâçÊãñÊõ≥ÁØÄÈªû‰∏≠ÂøÉÊòØÂê¶ËêΩÂú® phase ÂÖß\n          const center = { x: n.position.x + n.size.width / 2, y: n.position.y + n.size.height / 2 };\n          let newContainerId = null;\n          prevNodes.forEach(p => {\n            if (p.type === \"phase\") {\n              if (\n                center.x >= p.position.x &&\n                center.x <= p.position.x + p.size.width &&\n                center.y >= p.position.y &&\n                center.y <= p.position.y + p.size.height\n              ) {\n                newContainerId = p.id;\n              }\n            }\n          });\n          return { ...n, containerId: newContainerId };\n        }\n        return n;\n      }));\n      setDraggingNodeId(null);\n    }\n    if (resizingNodeId) {\n      setResizingNodeId(null);\n    }\n  };\n\n  // Áï∂ÈªûÈÅ∏ÁØÄÈªûÔºà‰∏çÈªûÈÅ∏Á∏ÆÊîæÊâãÊääÔºâÊôÇË®≠ÂÆöÈÅ∏Âèñ\n  const handleSelectNode = (e, nodeId) => {\n    e.stopPropagation();\n    setSelectedNodeId(nodeId);\n  };\n\n  // ÈñãÂßãÁ∏ÆÊîæÔºàÈªûÈÅ∏Âè≥‰∏ãËßíÊâãÊääÔºâ\n  const handleResizeMouseDown = (e, nodeId) => {\n    e.stopPropagation();\n    const containerRect = containerRef.current.getBoundingClientRect();\n    setResizingNodeId(nodeId);\n    setResizeStart({\n      x: e.clientX - containerRect.left,\n      y: e.clientY - containerRect.top,\n      width: selectedNode.size.width,\n      height: selectedNode.size.height\n    });\n  };\n\n  // Âà™Èô§ÁØÄÈªû\n  const handleDeleteNode = () => {\n    if (!selectedNodeId) return;\n    setNodes(prevNodes => prevNodes.filter(n => n.id !== selectedNodeId)\n      .map(n => n.containerId === selectedNodeId ? { ...n, containerId: null } : n)\n    );\n    setSelectedNodeId(null);\n  };\n\n  // Êñ∞Â¢ûÁØÄÈªûÔºàÂèØÁî±‰ΩøÁî®ËÄÖÈÅ∏Êìá typeÔºåÈÄôË£°È†êË®≠ÁÇ∫ taskÔºåPhase ‰πüÂèØÊñ∞Â¢ûÔºâ\n  const handleAddNode = (type = \"task\") => {\n    const newNode = {\n      id: `${Date.now()}`,\n      type,\n      label: type === \"phase\" ? \"New Phase\" : \"New Node\",\n      description: \"\",\n      link: \"\",\n      extras: [],\n      children: [],\n      containerId: null,\n      position: { x: 50, y: 50 },\n      size: { width: NODE_WIDTH_DEFAULT, height: NODE_HEIGHT_DEFAULT }\n    };\n    setNodes(prev => [...prev, newNode]);\n  };\n\n  // ÂÑ≤Â≠òÊµÅÁ®ãÂúñ JSON Âà∞ÂæåÁ´Ø\n  const handleSave = async () => {\n    try {\n      await axios.put(`${API_URL}/projects/${projectId}/flowchart`,\n        { flowChart: nodes },\n        { headers: { Authorization: `Bearer ${token}` } }\n      );\n      alert(\"Flowchart saved successfully!\");\n    } catch (error) {\n      console.error(\"Failed to save flowchart:\", error);\n      alert(\"Save failed.\");\n    }\n  };\n\n  // Ê†πÊìöÁØÄÈªû containerId Âà§Êñ∑ÊòØÂê¶È°ØÁ§∫ Phase Â∫ïÊ°ÜÔºàPhase ÁØÄÈªûËá™Ë°åÂëàÁèæÂ§ñÊ°ÜÔºâ\n  const renderConnections = () => {\n    // Êú¨ÁØÑ‰æã‰∏çËá™ÂãïÁï´ÈÄ£Á∑öÔºåËã•ÊúâÈúÄË¶ÅÂèØÂä†ÂÖ•Áï´Á∑öÈÇèËºØ\n    return null;\n  };\n\n  return (\n    <div>\n      <h2>Custom Flow Chart Editor</h2>\n      <div style={{ marginBottom: \"10px\" }}>\n        <button onClick={() => handleAddNode(\"task\")}>Add Task</button>\n        <button onClick={() => handleAddNode(\"phase\")} style={{ marginLeft: \"10px\" }}>Add Phase</button>\n        <button onClick={handleSave} style={{ marginLeft: \"10px\" }}>Save Flow Chart</button>\n      </div>\n      <div\n        ref={containerRef}\n        style={{ position: \"relative\", width: \"100%\", height: \"600px\", border: \"1px solid #ccc\", backgroundColor: \"#fafafa\" }}\n        onMouseMove={handleMouseMove}\n        onMouseUp={handleMouseUp}\n      >\n        {/* Â¶ÇÊúâÈúÄË¶ÅÔºåÊ∏≤ÊüìÈÄ£Á∑ö */}\n        <svg style={{ position: \"absolute\", top: 0, left: 0, width: \"100%\", height: \"100%\" }}>\n          {renderConnections()}\n        </svg>\n        {nodes.map(node => {\n          // Ëã•Ë©≤ÁØÄÈªûÊúâ containerIdÔºåÂâáÂÖ∂ z-indexËºÉÈ´òÔºàÂëàÁèæÂú® Phase ÂÖßÔºâ\n          const isInPhase = node.containerId !== null;\n          return (\n            <div\n              key={node.id}\n              style={{\n                position: \"absolute\",\n                left: node.position.x,\n                top: node.position.y,\n                width: node.size.width,\n                height: node.size.height,\n                border: selectedNodeId === node.id ? \"2px solid red\" : \"1px solid #333\",\n                boxSizing: \"border-box\",\n                backgroundColor: node.type === \"phase\" ? \"rgba(0, 0, 255, 0.1)\" : \"#fff\",\n                zIndex: isInPhase ? 2 : 1\n              }}\n              onMouseDown={(e) => handleMouseDown(e, node.id)}\n              onClick={(e) => handleSelectNode(e, node.id)}\n            >\n              {renderNodeContent(node)}\n              {/* Â¶ÇÊûúË©≤ÁØÄÈªûÁÇ∫ÈÅ∏ÂèñÁãÄÊÖãÔºåÈ°ØÁ§∫Âè≥‰∏ãËßíÁ∏ÆÊîæÊâãÊää */}\n              {selectedNodeId === node.id && (\n                <div\n                  style={{\n                    position: \"absolute\",\n                    right: 0,\n                    bottom: 0,\n                    width: RESIZE_HANDLE_SIZE,\n                    height: RESIZE_HANDLE_SIZE,\n                    backgroundColor: \"gray\",\n                    cursor: \"se-resize\"\n                  }}\n                  onMouseDown={(e) => handleResizeMouseDown(e, node.id)}\n                />\n              )}\n            </div>\n          );\n        })}\n      </div>\n      {/* ÂÅ¥ÈÇäÁ∑®ËºØË°®ÂñÆ */}\n      {selectedNode && (\n        <div style={{ marginTop: \"20px\", border: \"1px solid #ccc\", padding: \"10px\" }}>\n          <h3>Edit Node Properties</h3>\n          <div>\n            <label>Type:</label>\n            <select name=\"type\" value={selectedNode.type} onChange={handleEditChange}>\n              <option value=\"phase\">phase</option>\n              <option value=\"task\">task</option>\n              <option value=\"subFlow\">subFlow</option>\n              <option value=\"iterative\">iterative</option>\n              <option value=\"note\">note</option>\n              <option value=\"extra\">extra</option>\n            </select>\n          </div>\n          <div>\n            <label>Label:</label>\n            <input name=\"label\" value={selectedNode.label} onChange={handleEditChange} />\n          </div>\n          <div>\n            <label>Description:</label>\n            <textarea name=\"description\" value={selectedNode.description} onChange={handleEditChange} />\n          </div>\n          <div>\n            <label>Link:</label>\n            <input name=\"link\" value={selectedNode.link} onChange={handleEditChange} />\n          </div>\n          <div>\n            <label>Children (comma-separated IDs):</label>\n            <input\n              value={(selectedNode.children || []).join(\",\")}\n              onChange={handleChildrenChange}\n            />\n          </div>\n          <div>\n            <label>Extras (comma-separated):</label>\n            <input\n              name=\"extras\"\n              value={(selectedNode.extras || []).join(\",\")}\n              onChange={(e) => {\n                const arr = e.target.value.split(\",\").map(s => s.trim()).filter(s => s);\n                handleEditChange({ target: { name: \"extras\", value: arr } });\n              }}\n            />\n          </div>\n          <div style={{ marginTop: \"10px\" }}>\n            <button onClick={handleDeleteNode}>Delete Node</button>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default CustomFlowChartEditor;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}